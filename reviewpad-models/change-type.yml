labels:
  bug-fix:
    description: "Non-breaking change which fixes an issue"
    color: "#d62828"
  new-feature:
    description: "Non-breaking change which adds functionality"
    color: "#83c5be"
  improvements:
    description: "Non-breaking change without functionality"
    color: "#ffd60a"
  breaking-change:
    description: "Non-breaking change without functionality"
    color: "#d62828"

rules:
  - name: is-bug-fix
    spec: $contains($description(), "**Bug fix**") && !$contains($description(), "<!-- **Bug fix**")
  - name: is-new-feature
    spec: $contains($description(), "**New feature**") && !$contains($description(), "<!-- **New feature**")
  - name: is-improvements
    spec: $contains($description(), "**Improvements**") && !$contains($description(), "<!-- **Improvements**")
  - name: is-breaking-change
    spec: $contains($description(), "**Breaking change**") && !$contains($description(), "<!-- **Breaking change**")

workflows:
  # Label a pull request based on the type of change.
  # This is useful for filtering pull requests in the pull request list.
  - name: add-change-type-label
    always-run: true
    run:
      - if: $rule("is-bug-fix")
        then: $addLabel("bug-fix")
        else: $removeLabel("bug-fix")
      - if: $rule("is-new-feature")
        then: $addLabel("new-feature")
        else: $removeLabel("new-feature")
      - if: $rule("is-improvements")
        then: $addLabel("improvements")
        else: $removeLabel("improvements")
      - if: $rule("is-breaking-change")
        then: $addLabel("breaking-change")
        else: $removeLabel("breaking-change")
