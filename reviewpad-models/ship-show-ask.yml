labels:
  ship:
    description: "Pull request can be automatically merged and does not require code review"
    color: "#76dbbe"
  show:
    description: "Pull request can be auto-merged and a code review should be done post-merge"
    color: "#2986cc"
  ask:
    description: "Pull request requires a code review before merge"
    color: "#c90076"

rules:
  - name: is-ship
    spec: $contains($description(), "**Ship**:") && !$contains($description(), "<!-- **Ship**:")
  - name: is-show
    spec: $contains($description(), "**Show**:") && !$contains($description(), "<!-- **Show**:")
  - name: is-ask
    spec: $contains($description(), "**Ask**:") && !$contains($description(), "<!-- **Ask**:")

workflows:
  # Label a pull request based on type of merge strategy.
  - name: merge-strategy-label
    always-run: true
    run:
      - if: $rule("is-ship")
        then: $addLabel("ship")
        else: $removeLabel("ship")
      - if: $rule("is-show")
        then: $addLabel("show")
        else: $removeLabel("show")
      - if: $rule("is-ask")
        then: $addLabel("ask")
        else: $removeLabel("ask")
